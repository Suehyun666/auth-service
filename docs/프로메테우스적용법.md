1. etc/prometheus/prometheus.yml 생성
```bash
# 도커에게 파일 권한 주기
sudo chmod 644 /your/path/auth-service/prometheus.yml
```


2. docker 명령어 적용
```bash
docker network create monitoring
```

3. 프로메테우스
```bash
docker run -d \
  --name prometheus \
  --network host \
  -v /your/path/auth-service/prometheus.yml:/etc/prometheus/prometheus.yml \
  prom/prometheus:latest \
  --config.file=/etc/prometheus/prometheus.yml \
  --storage.tsdb.path=/prometheus
```


# 그라파나 적용법
```bash
docker run -d \
  --name grafana \
  --network monitoring \
  -p 3000:3000 \
  -e GF_SECURITY_ADMIN_PASSWORD=admin \
  grafana/grafana:latest 
  ```


# kafka
```bash
# 1.Kafka 3.7.0 실행 (KRaft 모드 / 네트워크: monitoring)
docker run -d \
  --name kafka \
  --network monitoring \
  -p 9092:9092 \
  apache/kafka:3.7.0
  
# 3. kakfa exporter 실행
docker run -d \
  --name kafka-exporter \
  --network monitoring \
  -p 9308:9308 \
  danielqsj/kafka-exporter \
  --kafka.server=kafka:9092
```

# 삭제
```bash
docker rm -f prometheus grafana kafka kafka-exporter
```


# prometheus 수정 시
```bash
docker restart prometheus
```


# 대시보드
```bash
docker network inspect monitoring
# 여기에 나오는 프로메테우스 주소를 그라파나 configuration에 적어야 함. 혹은
# http://prometheus:9090 같은 도커 네트워크에 있을 때 
# http://도커네트워크 게이트웨이주소:9090 -- sudo ufw allow 9090
```