# gRPC Configuration
quarkus.http.host=0.0.0.0
quarkus.http.port=${NOMAD_PORT_http:localhost:9053}
quarkus.grpc.server.port=50053

quarkus.grpc.server.use-separate-server=true
quarkus.grpc.server.max-inbound-message-size=4096

# Redis Configuration
quarkus.redis.hosts=${REDIS_HOSTS:redis://localhost:6379}
quarkus.redis.max-pool-size=64
quarkus.redis.max-waiting-requests=2048
quarkus.redis.timeout=1s

# Database Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USER:hts}
quarkus.datasource.password=${DB_PASSWORD:hts}
quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://localhost:5432/hts_auth}
quarkus.datasource.jdbc.min-size=16
quarkus.datasource.jdbc.max-size=16
quarkus.datasource.jdbc.initial-size=16
quarkus.datasource.jdbc.validation-query=SELECT 1
quarkus.datasource.jdbc.acquisition-timeout=3
quarkus.datasource.jdbc.leak-detection-interval=30s
quarkus.jooq.dialect=POSTGRES

# Kafka Configuration
kafka.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
mp.messaging.connector.smallrye-kafka.request.timeout.ms=5000
mp.messaging.connector.smallrye-kafka.session.timeout.ms=10000
mp.messaging.connector.smallrye-kafka.heartbeat.interval.ms=3000

# Incoming: Account Created Events
mp.messaging.incoming.account-created-events.connector=smallrye-kafka
mp.messaging.incoming.account-created-events.topic=account.created.events
mp.messaging.incoming.account-created-events.value.deserializer=org.apache.kafka.common.serialization.ByteArrayDeserializer
mp.messaging.incoming.account-created-events.key.deserializer=org.apache.kafka.common.serialization.LongDeserializer
mp.messaging.incoming.account-created-events.group.id=auth-service
mp.messaging.incoming.account-created-events.auto.offset.reset=earliest
mp.messaging.incoming.account-created-events.enable.auto.commit=false
mp.messaging.incoming.account-created-events.commit-strategy=throttled
mp.messaging.incoming.account-created-events.throttled.unprocessed-record-max-age.ms=10000

# Incoming: Account Deleted Events
mp.messaging.incoming.account-deleted-events.connector=smallrye-kafka
mp.messaging.incoming.account-deleted-events.topic=account.deleted.events
mp.messaging.incoming.account-deleted-events.value.deserializer=org.apache.kafka.common.serialization.ByteArrayDeserializer
mp.messaging.incoming.account-deleted-events.key.deserializer=org.apache.kafka.common.serialization.LongDeserializer
mp.messaging.incoming.account-deleted-events.group.id=auth-service
mp.messaging.incoming.account-deleted-events.auto.offset.reset=earliest
mp.messaging.incoming.account-deleted-events.enable.auto.commit=false
mp.messaging.incoming.account-deleted-events.commit-strategy=throttled
mp.messaging.incoming.account-deleted-events.throttled.unprocessed-record-max-age.ms=10000

# Vert.x Configuration
quarkus.vertx.event-loops-pool-size=32
quarkus.vertx.internal-blocking-pool-size=32

# Logging Configuration
quarkus.log.level=OFF
quarkus.log.category."io.grpc".level=OFF
quarkus.log.category."io.smallrye".level=OFF
quarkus.kafka.devservices.enabled=false

# Metrics Configuration
quarkus.micrometer.enabled=true
quarkus.micrometer.registry-enabled-default=true
quarkus.micrometer.binder-enabled-default=true
quarkus.micrometer.binder.jvm=true
quarkus.micrometer.binder.system=true
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics

# Container Image Configuration
quarkus.container-image.group=suehunpark
quarkus.container-image.name=auth-service
quarkus.container-image.tag=${GIT_COMMIT:latest}
quarkus.container-image.push=false
quarkus.container-image.registry=docker.io
quarkus.container-image.insecure=false
